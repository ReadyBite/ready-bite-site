<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Details - Ready Bite</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .order-container { max-width: 400px; margin: auto; padding: 20px; border: 1px solid #ccc; border-radius: 10px; }
        label { display: block; margin-top: 10px; text-align: left; }
        input { width: 100%; padding: 8px; margin-top: 5px; }
        button { margin-top: 15px; padding: 10px; background-color: #28a745; color: white; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Order Details</h1>
    <div class="order-container">
        <form id="orderForm">
            <label for="fullName">Full Name</label>
            <input type="text" id="fullName" name="fullName" required>

            <label for="email">Email</label>
            <input type="email" id="email" name="email" required>

            <label for="phone">Phone Number (000-000-0000)</label>
            <input type="tel" id="phone" name="phone" pattern="\d{3}-\d{3}-\d{4}" required>

            <label for="address">Address</label>
            <input type="text" id="address" name="address" placeholder="Street Address" required>
            <input type="text" id="city" name="city" placeholder="City" required>
            <input type="text" id="state" name="state" placeholder="State" required>
            <input type="text" id="zip" name="zip" placeholder="ZIP Code" required>

            <h3>Total Bill: $<span id="totalBill">0.00</span></h3>
            <p>Please send your payment to <strong>Venmo: @Matt-Hanson-107</strong></p>

            <button type="button" onclick="submitOrder()">Submit Order</button>
        </form>
    </div>

    <script>
        function submitOrder() {
            const fullName = document.getElementById("fullName").value;
            const email = document.getElementById("email").value;
            const phone = document.getElementById("phone").value;
            const address = document.getElementById("address").value;
            const city = document.getElementById("city").value;
            const state = document.getElementById("state").value;
            const zip = document.getElementById("zip").value;
            const totalBill = localStorage.getItem("totalPrice") || "0.00";
            
            if (!fullName || !email || !phone || !address || !city || !state || !zip) {
                alert("Please fill in all fields.");
                return;
            }
            
            document.getElementById("totalBill").innerText = totalBill;
            
            const orderDetails = `Name: ${fullName}\nEmail: ${email}\nPhone: ${phone}\nAddress: ${address}, ${city}, ${state}, ${zip}\nTotal Bill: $${totalBill}\nPlease send payment to Venmo: @Matt-Hanson-107`;
            
            alert("Your order has been received! Please send your payment via Venmo to @Matt-Hanson-107. Thank you for choosing Ready Bite!");
            
            console.log("Order Submitted:", orderDetails);
            sendReceipt(email, orderDetails);
            window.location.href = "index.html";
        }

        function sendReceipt(email, orderDetails) {
            fetch('https://formspree.io/f/mknljgby', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    email: email,
                    message: `Thank you for your order!\n\n${orderDetails}\n\nIf you have any questions, feel free to contact us.`
                })
            }).then(response => response.json())
            .then(data => console.log("Receipt sent successfully."))
            .catch(error => console.error("Error sending receipt:", error));
        }

        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("totalBill").innerText = localStorage.getItem("totalPrice") || "0.00";
        });
    </script>
</body>
</html>
